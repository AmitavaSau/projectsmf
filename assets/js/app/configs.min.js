var colleges = null;
var seats = null;
var courses = null;
var texts = null;
var student_dt, students;

/***************************
COLLEGE RELATED FUNCTIONS
***************************/
//print colleges
function printCollegeMaster(arr) {
	$('#college_listing tbody').html('');
	$.each(arr, function( key, value ) {
		var row = $('<tr/>').attr('id', 'row_' + key);
		row.append($('<td/>').text(value.col_code));
		row.append($('<td/>').text(value.col_name));
		//row.append($('<td/>').text(''));
		
		$('#college_listing tbody').append(row);
	});
	$('.btn-college-delete').hide();
	$('#col_sl').val('');
	$('#action').val('CREATE');
}

//load colleges
function loadColleges() {
	var param = '';

	$.ajax({
		url: BASE_URL + 'configs/get_colleges',
		data: param,
		type: 'get',
		dataType: 'json',
		success: function (res) {
			if(!res.error) {
				colleges = res;
				printCollegeMaster(res);
			}
			else {
				swal('Oops!', res.message, 'error');
			}
		}
	});	
}

//save college
$(document).on('click', '.btn-college-save', function () {
	var col_code = $('#col_code').val();
	var col_name = $('#col_name').val();
	var col_address = $('#col_address').val();
	var col_sl = $('#col_sl').val();
	var action = $('#action').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'action=' + action + '&col_code=' + col_code + 
				'&col_name=' + encodeURIComponent(col_name) + 
				'&col_address=' + encodeURIComponent(col_address)  + 
				'&col_sl=' + col_sl + '&csrf_ax_token=' + csrf_ax_token;

	if( (col_code == '') || (col_name == '') ) {
		swal('Oops!', 'College code and name can\'t be blank', 'error');
	}
	else {
		$.ajax({
			url: BASE_URL + 'configs/save_college',
			data: param,
			type: 'post',
			dataType: 'json',
			success: function (res) {
				if(!res.error) {
					swal('Success!', res.message, 'success');
					colleges = res.data;
					printCollegeMaster(res.data);
					$('#col_code').val('');
					$('#col_name').val('');
					$('#col_address').val('');
					$('#col_sl').val('');
				}
				else {
					swal('Oops!', res.message, 'error');
				}
				$('input[name="csrf_ax_token"]').val(res.token);
			}
		});
	}
		
});

//get college data on dblclick
$(document).on('dblclick', '#college_listing tbody td', function () {
	var row = $(this).parent().attr('id');
	var arr = row.split('_');
	var index = arr[1];
	
	$('#col_code').val(colleges[index].col_code);
	$('#col_name').val(colleges[index].col_name);
	$('#col_address').val(colleges[index].col_address);
	
	$('#col_sl').val(colleges[index].col_sl);
	$('#action').val('UPDATE');
	
	$('.btn-college-delete').show();
});	

//delete college
$(document).on('click', '.btn-college-delete', function (e) {
	var col_sl = $('#col_sl').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'col_sl=' + col_sl + '&csrf_ax_token=' + csrf_ax_token;

	swal({
		    title: "Are you sure?",
		    text: "You will not be able to recover this once confirmed.",
		    type: "warning",
		    showCancelButton: true,
		    confirmButtonColor: '#dc3545',
		    confirmButtonText: 'Yes, I am sure!',
		    cancelButtonText: "No, cancel it!",
		    closeOnConfirm: true,
		    closeOnCancel: true
		 },
		 function(isConfirm){
		 	if (isConfirm){
		 		$.ajax({
					url: BASE_URL + 'configs/delete_college',
					data: param,
					type: 'post',
					dataType: 'json',
					success: function (res) {
						if(!res.error) {
							swal('Success!', res.message, 'success');
							colleges = res.data;
							printCollegeMaster(res.data);
							$('#col_code').val('');
							$('#col_name').val('');
							$('#col_address').val('');
							$('#col_sl').val('');
							$('.btn-college-delete').hide();
						}
						else {
							swal('Oops!', res.message, 'error');
						}
						$('input[name="csrf_ax_token"]').val(res.token);
					}
				});	
		 	} 
		 	else {
		         e.preventDefault();
		    }
		 });	

	
});	

//cancel
$(document).on('click', '.btn-college-cancel', function (e) {
	$('#col_code').val('');
	$('#col_name').val('');
	$('#col_address').val('');
	$('#col_sl').val('');
	$('.btn-college-delete').hide();
	$('#action').val('CREATE');
});	

/***************************
COURSE RELATED FUNCTIONS
***************************/
//print courses
function printCourseMaster(arr) {
	$('#courses_listing tbody').html('');
	$.each(arr, function( key, value ) {
		var row = $('<tr/>').attr('id', 'row_' + key);
		row.append($('<td/>').text(value.crs_course));
		row.append($('<td/>').text(value.crs_dept));
		row.append($('<td/>').text(value.crs_name));
		//row.append($('<td/>').text(''));
		
		$('#courses_listing tbody').append(row);
	});
	$('.btn-course-delete').hide();
	$('#crs_sl').val('');
	$('#action').val('CREATE');
}

//load colleges
function loadCourses() {
	var param = '';

	$.ajax({
		url: BASE_URL + 'configs/get_courses',
		data: param,
		type: 'get',
		dataType: 'json',
		success: function (res) {
			if(!res.error) {
				courses = res;
				printCourseMaster(res);
			}
			else {
				swal('Oops!', res.message, 'error');
			}
		}
	});	
}

//save course
$(document).on('click', '.btn-course-save', function () {
	var crs_course = $('#crs_course').val();
	var crs_dept = $('#crs_dept').val();
	var crs_name = $('#crs_name').val();
	var crs_sl 	 = $('#crs_sl').val();
	var action 	 = $('#action').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'action=' + action + '&crs_course=' + crs_course + 
				'&crs_dept=' + encodeURIComponent(crs_dept) + 
				'&crs_name=' + encodeURIComponent(crs_name) + 
				'&crs_sl=' + crs_sl + '&csrf_ax_token=' + csrf_ax_token;

	if( (crs_course == '') || (crs_dept == '') || (crs_name == '') ) {
		swal('Oops!', 'Course, department and name can\'t be blank', 'error');
	}
	else {
		$.ajax({
			url: BASE_URL + 'configs/save_course',
			data: param,
			type: 'post',
			dataType: 'json',
			success: function (res) {
				if(!res.error) {
					swal('Success!', res.message, 'success');
					courses = res.data;
					printCourseMaster(res.data);
					$('#crs_course').val('');
					$('#crs_dept').val('');
					$('#crs_name').val('');
					$('#crs_sl').val('');
				}
				else {
					swal('Oops!', res.message, 'error');
				}
				$('input[name="csrf_ax_token"]').val(res.token);
			}
		});
	}
		
});


//get course data on dblclick
$(document).on('dblclick', '#courses_listing tbody td', function () {
	var row = $(this).parent().attr('id');
	var arr = row.split('_');
	var index = arr[1];
	
	$('#crs_course ').selectpicker('val', courses[index].crs_course);
	$('#crs_dept').val(courses[index].crs_dept);
	$('#crs_name').val(courses[index].crs_name);
	$('#crs_sl').val(courses[index].crs_sl);
	$('#action').val('UPDATE');
	
	$('.btn-course-delete').show();
});

//delete course
$(document).on('click', '.btn-course-delete', function (e) {
	var crs_sl = $('#crs_sl').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'crs_sl=' + crs_sl + '&csrf_ax_token=' + csrf_ax_token;

	swal({
		    title: "Are you sure?",
		    text: "You will not be able to recover this once confirmed.",
		    type: "warning",
		    showCancelButton: true,
		    confirmButtonColor: '#dc3545',
		    confirmButtonText: 'Yes, I am sure!',
		    cancelButtonText: "No, cancel it!",
		    closeOnConfirm: true,
		    closeOnCancel: true
		 },
		 function(isConfirm){
		 	if (isConfirm){
		 		$.ajax({
					url: BASE_URL + 'configs/delete_course',
					data: param,
					type: 'post',
					dataType: 'json',
					success: function (res) {
						if(!res.error) {
							swal('Success!', res.message, 'success');
							colleges = res.data;
							printCourseMaster(res.data);
							$('#crs_code').val('');
							$('#crs_name').val('');
							$('#crs_sl').val('');
							$('.btn-course-delete').hide();
						}
						else {
							swal('Oops!', res.message, 'error');
						}
						$('input[name="csrf_ax_token"]').val(res.token);
					}
				});	
		 	} 
		 	else {
		         e.preventDefault();
		    }
		 });	

	
});

//course cancel
$(document).on('click', '.btn-course-cancel', function (e) {
	$('#crs_code').val('');
	$('#crs_name').val('');
	$('#crs_sl').val('');
	$('.btn-course-delete').hide();
	$('#action').val('CREATE');
});

/***************************
SEAT RELATED FUNCTIONS
***************************/
//print seats
function printSeatMaster(arr) {
	$('#seat_listing tbody').html('');
	$.each(arr, function( key, value ) {
		var row = $('<tr/>').attr('id', 'row_' + key);
		row.append($('<td/>').text(value.col_code));
		row.append($('<td/>').text(value.col_name));
		row.append($('<td/>').text(value.crs_course));
		row.append($('<td/>').text(value.crs_name));
		row.append($('<td/>').text(value.cat_ge));
		row.append($('<td/>').text(value.cat_sc));
		row.append($('<td/>').text(value.cat_st));
		row.append($('<td/>').text(value.cat_oa));
		row.append($('<td/>').text(value.cat_ob));
		row.append($('<td/>').text(value.cat_pw));
	//	row.append($('<td/>').text(value.cat_sp_ge));
	//	row.append($('<td/>').text(value.cat_sp_sc));
		
		$('#seat_listing tbody').append(row);
	});
	$('.btn-seat-delete').hide();
	$('#seat_sl').val('');
	$('#action').val('CREATE');
}

//load seats
function loadSeats() {
	var param = '';

	$.ajax({
		url: BASE_URL + 'configs/get_seats',
		data: param,
		type: 'get',
		dataType: 'json',
		success: function (res) {
			if(!res.error) {
				seats = res;
				printSeatMaster(res);
			}
			else {
				swal('Oops!', res.message, 'error');
			}
		}
	});	
}

//save seat
$(document).on('click', '.btn-seat-save', function () {
	var col_code = $('#col_code').val();
	var crs_code = $('#crs_code').val();
	var crs_name = $('#crs_name').val();
	var cat_ge = $('#cat_ge').val();
	var cat_sc = $('#cat_sc').val();
	var cat_st = $('#cat_st').val();
	var cat_oa = $('#cat_oa').val();
	var cat_ob = $('#cat_ob').val();
	var cat_pw = $('#cat_pw').val();
	/*var cat_sp_ge = $('#cat_sp_ge').val();
	var cat_sp_sc = $('#cat_sp_sc').val();*/

	var seat_sl = $('#seat_sl').val();
	var action = $('#action').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'action=' + action + '&col_code=' + col_code + '&crs_code=' + crs_code + 
				'&crs_name=' + crs_name  + '&cat_ge=' + cat_ge + 
				'&cat_sc=' + cat_sc  + '&cat_st=' + cat_st + 
				'&cat_oa=' + cat_oa  + '&cat_ob=' + cat_ob + '&cat_pw=' + cat_pw  + 
				
				'&seat_sl=' + seat_sl + '&csrf_ax_token=' + csrf_ax_token;

	if( (col_code == '') || (crs_code == '') || (crs_name == '')  || 
		(cat_ge == '') || (cat_sc == '') || (cat_st == '') || 
		(cat_oa == '') || (cat_ob == '') || (cat_pw == '') ) {
		swal('Oops!', 'All fields are required', 'error');
	}
	else {
		$.ajax({
			url: BASE_URL + 'configs/save_seat',
			data: param,
			type: 'post',
			dataType: 'json',
			success: function (res) {
				if(!res.error) {
					swal('Success!', res.message, 'success');
					seats = res.data;
					printSeatMaster(res.data);
					$('#col_code').val('');
					$('#crs_code').val('');
					$('#crs_name').val('');
					$('#cat_ge').val('');
					$('#cat_sc').val('');
					$('#cat_st').val('');
					$('#cat_oa').val('');
					$('#cat_ob').val('');
					$('#cat_pw').val('');
					/*$('#cat_sp_ge').val('');
					$('#cat_sp_sc').val('');*/
					$('#seat_sl').val('');
				}
				else {
					swal('Oops!', res.message, 'error');
				}
				$('input[name="csrf_ax_token"]').val(res.token);
			}
		});
	}
		
});

//get college seat data on dblclick
$(document).on('dblclick', '#seat_listing tbody td', function () {
	var row = $(this).parent().attr('id');
	var arr = row.split('_');
	var index = arr[1];
	
	$('#col_code ').selectpicker('val', seats[index].col_code);
	$('#crs_code').selectpicker('val', seats[index].crs_course);
	$('#crs_name').selectpicker('val', seats[index].crs_code);
	$('#cat_ge').val(seats[index].cat_ge);
	$('#cat_sc').val(seats[index].cat_sc);
	$('#cat_st').val(seats[index].cat_st);
	$('#cat_oa').val(seats[index].cat_oa);
	$('#cat_ob').val(seats[index].cat_ob);
	$('#cat_pw').val(seats[index].cat_pw);
/*	$('#cat_sp_ge').val(seats[index].cat_sp_ge);
	$('#cat_sp_sc').val(seats[index].cat_sp_sc);*/
	
	$('#seat_sl').val(seats[index].seat_sl);
	$('#action').val('UPDATE');
	
	$('.btn-seat-delete').show();
});	

//delete seat
$(document).on('click', '.btn-seat-delete', function (e) {
	var seat_sl = $('#seat_sl').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'seat_sl=' + seat_sl + '&csrf_ax_token=' + csrf_ax_token;

	swal({
		    title: "Are you sure?",
		    text: "You will not be able to recover this once confirmed.",
		    type: "warning",
		    showCancelButton: true,
		    confirmButtonColor: '#dc3545',
		    confirmButtonText: 'Yes, I am sure!',
		    cancelButtonText: "No, cancel it!",
		    closeOnConfirm: true,
		    closeOnCancel: true
		 },
		 function(isConfirm){
		 	if (isConfirm){
		 		$.ajax({
					url: BASE_URL + 'configs/delete_seat',
					data: param,
					type: 'post',
					dataType: 'json',
					success: function (res) {
						if(!res.error) {
							swal('Success!', res.message, 'success');
							seats = res.data;
							printSeatMaster(res.data);
							$('#col_code').val('');
							$('#crs_code').val('');
							$('#cat_ge').val('');
							$('#seat_sl').val('');
							$('.btn-seat-delete').hide();
						}
						else {
							swal('Oops!', res.message, 'error');
						}
						$('input[name="csrf_ax_token"]').val(res.token);
					}
				});	
		 	} 
		 	else {
		         e.preventDefault();
		    }
		 });	

	
});	

//cancel
$(document).on('click', '.btn-seat-cancel', function (e) {
	$('#col_code').selectpicker('val', []);
	$('#crs_code').selectpicker('val', []);
	$('#crs_name').selectpicker('val', []);
	$('#cat_ge').val('');
	$('#cat_sc').val('');
	$('#cat_st').val('');
	$('#cat_oa').val('');
	$('#cat_ob').val('');
	$('#cat_pw').val('');
	$('#cat_sp_ge').val('');
	$('#cat_sp_sc').val('');
	$('#seat_sl').val('');
	$('.btn-seat-delete').hide();
	$('#action').val('CREATE');
});

/***************************
STUDENT RELATED FUNCTIONS
***************************/
function loadStudents() {
	var csrf	=	$('input[name="csrf_ax_token"]').val();
	var param	=	'';
	if ( $.fn.dataTable.isDataTable( '#student_listing' ) ) {
		student_dt.destroy();
	}
	
	student_dt = $('#student_listing').DataTable( {	
				"lengthMenu": [ [10, 25, 50, 100, -1], [10, 25, 50, 100, "All"] ],
				"pageLength": 50,
				responsive: true,
				//"ajax": BASE_URL + "configs/get_students",
				"ajax":{
					"type": 'GET',
					"dataType": 'json',
					"url": BASE_URL + "configs/get_students",
					"dataSrc": function (response) {
						students = response;
						return (response.data);
					},
				},
				"columns": [
					{ "data": null},
					{ "data": 'appl_roll_num'},
					{ "data": 'appl_gmr'},
					{ "data": "appl_fullname"},
					{ "data": "appl_fathername"},
					{ "data": "appl_category"},
					{ "data": "appl_dob"},
					{ "data": "appl_score"}
				],
		        
				"columnDefs": [ {
						"searchable": false,
						"orderable": false, 
						"className": "text-center",
						"targets": [0, 2, 5, 6, 7]
					}],
				"ordering": false,
				
				"createdRow": function( row, data, dataIndex ) {
					$(row).attr('id', 'row_' + dataIndex);
				}
			});
	    
		student_dt.on( 'order.student_dt search.student_dt', function () {
			student_dt.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
				cell.innerHTML = i+1;
			});
	}).draw();

}

//save students
$(document).on('click', '.btn-student-save', function () {
	var appl_roll_num = $('#appl_roll_num').val();
	var appl_form_num = $('#appl_form_num').val();
	var appl_fullname = $('#appl_fullname').val();
	var appl_fathername = $('#appl_fathername').val();
	var appl_category = $('#appl_category').val();
	var appl_dob = $('#appl_dob').val();
	var appl_sl = $('#appl_sl').val();
	var action = $('#action').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'action=' + action + '&appl_roll_num=' + appl_roll_num + '&appl_form_num=' + appl_form_num + 
				'&appl_fullname=' + appl_fullname  + '&appl_fathername=' + appl_fathername + '&appl_category=' + appl_category + '&appl_dob=' + appl_dob + '&appl_sl=' + appl_sl + '&action=' + action + '&csrf_ax_token=' + csrf_ax_token;

	if( (appl_roll_num == '') || (appl_fullname == '') || (appl_dob == '') ) {
		swal('Oops!', 'Roll, Name and Date of Birth can\'t be blank', 'error');
	}
	else {
		$.ajax({
			url: BASE_URL + 'configs/save_student',
			data: param,
			type: 'post',
			dataType: 'json',
			success: function (res) {
				if(!res.error) {
					swal('Success!', res.message, 'success');
					setTimeout(function(){ 
							$('#student_modal').hide();
							window.location.reload();
						}, 3000);
					
				}
				else {
					swal('Oops!', res.message, 'error');
				}
				$('input[name="csrf_ax_token"]').val(res.token);
			}
		});
	}
		
});

//get student data on dblclick
$(document).on('dblclick', '#student_listing tbody td', function () {
	var row = $(this).parent().attr('id');
	var arr = row.split('_');
	var index = arr[1];

	$('#appl_sl').val(students.data[index].appl_sl);
	$('#appl_roll_num').val(students.data[index].appl_roll_num);
	$('#appl_fullname').val(students.data[index].appl_fullname);
	$('#appl_fathername').val(students.data[index].appl_fathername);
	$('#appl_category').selectpicker('val', students.data[index].appl_category_code);
	$('#appl_dob').val(students.data[index].appl_dob);
	
	$('#action').val('UPDATE');
	$('.btn-student-delete').show();
	
	$('#student_modal').modal('show');
});	

//cancel
$(document).on('click', '.btn-student-cancel', function (e) {
	$('#appl_sl').val('');
	$('#appl_roll_num').val('');
	$('#appl_form_num').val('');
	$('#appl_fullname').val('');
	$('#appl_fathername').val('');
	$('#appl_category').selectpicker('val', []);
	$('#appl_dob').val('');

	$('.btn-student-delete').hide();
	$('#student_modal').modal('hide');
	$('#action').val('CREATE');
});

//delete students
$(document).on('click', '.btn-student-delete', function (e) {
	var appl_sl = $('#appl_sl').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'appl_sl=' + appl_sl + '&csrf_ax_token=' + csrf_ax_token;

	swal({
		    title: "Are you sure?",
		    text: "You will not be able to recover this once confirmed.",
		    type: "warning",
		    showCancelButton: true,
		    confirmButtonColor: '#dc3545',
		    confirmButtonText: 'Yes, I am sure!',
		    cancelButtonText: "No, cancel it!",
		    closeOnConfirm: true,
		    closeOnCancel: true
		 },
		 function(isConfirm){
		 	if (isConfirm){
		 		$.ajax({
					url: BASE_URL + 'configs/delete_student',
					data: param,
					type: 'post',
					dataType: 'json',
					success: function (res) {
						if(!res.error) {
							swal('Success!', res.message, 'success');
							students = res.data;
							
							$('.btn-seat-delete').hide();
							$('#student_modal').hide();
							window.location.reload();
						}
						else {
							swal('Oops!', res.message, 'error');
						}
						$('input[name="csrf_ax_token"]').val(res.token);
					}
				});	
		 	} 
		 	else {
		         e.preventDefault();
		    }
		 });	

	
});	


/***************************
CONTNET RELATED FUNCTIONS
***************************/
//print contents
function printContentMaster(arr) {
	$('#content_listing tbody').html('');
	var n =1;
	$.each(arr, function( key, value ) {
		var row = $('<tr/>').attr('id', 'row_' + key);
		row.append($('<td/>').text(n));
		row.append($('<td/>').text(value.conf_name));
		row.append($('<td/>').text(value.conf_value));
		
		$('#content_listing tbody').append(row);
		n++;
	});
	$('.btn-text-delete').hide();
	$('#conf_sl').val('');
	$('#action').val('CREATE');
}

//load contents
function loadContents() {
	var param = '';

	$.ajax({
		url: BASE_URL + 'configs/get_texts',
		data: param,
		type: 'get',
		dataType: 'json',
		success: function (res) {
			if(!res.error) {
				texts = res;
				printContentMaster(res);
			}
			else {
				swal('Oops!', res.message, 'error');
			}
		}
	});	
}

//save content
$(document).on('click', '.btn-text-save', function () {
	var conf_name = $('#conf_name').val();
	var conf_value = $('#conf_value').val();
	var conf_sl = $('#conf_sl').val();
	var action = $('#action').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'action=' + action + '&conf_name=' + conf_name + '&conf_value=' + conf_value + 
				'&conf_sl=' + conf_sl + '&csrf_ax_token=' + csrf_ax_token;

	if( (conf_name == '') || (conf_value == '')) {
		swal('Oops!', 'Text Key and value can\'t be blank', 'error');
	}
	else {
		$.ajax({
			url: BASE_URL + 'configs/save_text',
			data: param,
			type: 'post',
			dataType: 'json',
			success: function (res) {
				if(!res.error) {
					swal('Success!', res.message, 'success');
					texts = res.data;
					printContentMaster(res.data);
					$('#conf_name').val('');
					$('#conf_value').val('');
					$('#conf_sl').val('');
				}
				else {
					swal('Oops!', res.message, 'error');
				}
				$('input[name="csrf_ax_token"]').val(res.token);
			}
		});
	}
		
});

//get content data on dblclick
$(document).on('dblclick', '#content_listing tbody td', function () {
	var row = $(this).parent().attr('id');
	var arr = row.split('_');
	var index = arr[1];
	
	$('#conf_name ').attr('readonly', true).val(texts[index].conf_name);
	$('#conf_value ').val(texts[index].conf_value);
	$('#conf_sl').val(texts[index].conf_sl);
	$('#action').val('UPDATE');
	
	$('.btn-text-delete').show();
});	

//cancel
$(document).on('click', '.btn-text-cancel', function (e) {
	$('#conf_name').attr('readonly', false).val('');
	$('#conf_value').val('');
	$('#conf_sl').val('');
	$('.btn-text-delete').hide();
	$('#action').val('CREATE');
});

//delete content
$(document).on('click', '.btn-text-delete', function (e) {
	var conf_sl = $('#conf_sl').val();
	var csrf_ax_token = $('input[name="csrf_ax_token"]').val();

	var param = 'conf_sl=' + conf_sl + '&csrf_ax_token=' + csrf_ax_token;

	swal({
		    title: "Are you sure?",
		    text: "You will not be able to recover this once confirmed.",
		    type: "warning",
		    showCancelButton: true,
		    confirmButtonColor: '#dc3545',
		    confirmButtonText: 'Yes, I am sure!',
		    cancelButtonText: "No, cancel it!",
		    closeOnConfirm: true,
		    closeOnCancel: true
		 },
		 function(isConfirm){
		 	if (isConfirm){
		 		$.ajax({
					url: BASE_URL + 'configs/delete_text',
					data: param,
					type: 'post',
					dataType: 'json',
					success: function (res) {
						if(!res.error) {
							swal('Success!', res.message, 'success');
							texts = res.data;
							printContentMaster(res.data);
							$('#conf_name').val('');
							$('#conf_value').val('');
							$('#conf_sl').val('');
							$('.btn-text-delete').hide();
						}
						else {
							swal('Oops!', res.message, 'error');
						}
						$('input[name="csrf_ax_token"]').val(res.token);
					}
				});	
		 	} 
		 	else {
		         e.preventDefault();
		    }
		 });	

	
});	

//save college
$(document).on('click', '.seat-convert', function () {
	var from = $(this).data('from');
	var to = $(this).data('to');
	
	var param = 'from=' + from + '&to=' + to ;

	
		$.ajax({
			url: BASE_URL + 'configs/convert_seat',
			data: param,
			type: 'get',
			dataType: 'json',
			success: function (res) {
				window.location.href=BASE_URL+'reports/seat-status';
			}
		});
	 	
});



//document ready
$(document).ready(function() {
	
	if(pathname.search("/configs/colleges") != -1) {
		loadColleges();	
	}
	
	if(pathname.search("/configs/courses") != -1) {
		loadCourses();	
	}
	
	if(pathname.search("/configs/seats") != -1) {
		loadSeats();	
	}
	
	if(pathname.search("/configs/students") != -1) {
		loadStudents();	
	}
	
	if(pathname.search("/configs/texts") != -1) {
		loadContents();	
	}
});			

